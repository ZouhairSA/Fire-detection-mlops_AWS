<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Fire Detection â€“ YOLO</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<div class="container">

    <h1 class="title">ðŸ”¥ DÃ©tection dâ€™Incendie â€“ IA YOLO</h1>
    <p class="subtitle">TÃ©lÃ©versez une image pour analyser la prÃ©sence de feu</p>

    <form method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
        <div class="upload-box" id="uploadBox">
            <input type="file" name="image" id="imageInput" accept="image/*" onchange="previewImage(event)">
            <p id="uploadText">Cliquez ici pour choisir une image</p>
        </div>

        <button type="submit" class="btn">Analyser</button>
    </form>

    <div id="previewContainer">
        <h2>AperÃ§u :</h2>
        <img id="previewImage" src="">
    </div>

    {% if results %}
        <div class="result-box">

            {% if results.error %}
                <p class="error">{{ results.error }}</p>

            {% elif results|length == 0 %}
                <p class="no-fire">âœ” Aucun feu dÃ©tectÃ© dans cette image</p>

            {% else %}
                <p class="fire-detected">ðŸ”¥ Feu dÃ©tectÃ© avec succÃ¨s !</p>

                <ul>
                    {% for r in results %}
                        <li>Classe : <strong>{{ r.class }}</strong> â€” Confiance : <strong>{{ r.confidence }}</strong></li>
                    {% endfor %}
                </ul>

                <h3>Image annotÃ©e :</h3>
                <img src="/static/output.jpg" class="output-img">

            {% endif %}

        </div>
    {% endif %}

</div>


<script>
    function validateForm() {
        const file = document.getElementById("imageInput").value;
        if (!file) {
            alert("Veuillez choisir une image avant dâ€™analyser.");
            return false;
        }
        return true;
    }

    function previewImage(event) {
        const reader = new FileReader();
        reader.onload = function(){
            const img = document.getElementById("previewImage");
            img.src = reader.result;
            document.getElementById("previewContainer").style.display = "block";
        }
        reader.readAsDataURL(event.target.files[0]);
    }
</script>

</body>
</html>


<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fire Detection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h1 class="mb-4 text-center">ðŸ”¥ Fire Detection ðŸ”¥</h1>

    <form method="POST" enctype="multipart/form-data" class="mb-4">
        <div class="mb-3">
            <input type="file" class="form-control" name="image" required>
        </div>
        <button type="submit" class="btn btn-danger w-100">Upload & Predict</button>
    </form>

    {% if image_path %}
    <div class="text-center mb-4">
        <h4>Image Uploaded:</h4>
        <img src="{{ image_path }}" alt="Uploaded Image" class="img-fluid rounded" style="max-height:400px;">
    </div>
    {% endif %}

    {% if results %}
    <div class="card p-3">
        <h4>Predictions:</h4>
        <ul class="list-group list-group-flush">
            {% for r in results %}
            <li class="list-group-item">
                <strong>{{ r.class }}</strong> â€” Confidence: {{ r.confidence }}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>
</body>
</html> -->
